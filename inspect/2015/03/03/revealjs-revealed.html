<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="Julien Sobczak">
<meta name="robots" content="index,follow,noodp">
<meta name="googlebot" content="index,follow">
<meta name="subject" content="Programming">


    <title>Reveal.js Revealed</title>

    <!-- To make search engines use the HTTPS url -->
<link rel="canonical" href="https://www.juliensobczak.com/inspect/2015/03/03/revealjs-revealed.html">
<link rel="alternate" type="application/atom+xml" title="I'm Lovin' I.T. - Julien Sobczak" href="https://www.juliensobczak.com/feed.xml">

<!-- Asciidoctor assets -->
<link href="/css/coderay.css" rel="stylesheet" />

<!-- Theme CSS -->
<link href="/css/app.css" rel="stylesheet">

<!-- Custom Fonts -->
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i|Oswald" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Nothing+You+Could+Do" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Righteous" rel="stylesheet">

<!-- Favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

</head>

<body id="page-post">
  <!-- Custom loader -->
<div id="loader-wrapper">
  <div id="loader"></div>
</div>


  <!-- Navigation -->

  <nav id="mainNav" class="navbar-default">

    
    
    <div id="reading-bar"></div>
    
    

    <div class="container">
      <a class="navbar-brand" href="/index.html">I'm lovin' I.T.</a>
      <div class="navbar-collabsible">
        <input id="collapsible" class="navbar-checkbox-toggle" type="checkbox">
        <label for="collapsible" class="navbar-label-toggle">Menu <i class="fas fa-bars"></i></label>
        <div class="navbar-collapse">
          <ul>

            
            <li>
            
                <a href="/categories/read.html">I'm readin' I.T.</a>
            </li>

            
            <li>
            
                <a href="/categories/write.html">I'm writin' I.T.</a>
            </li>

            
            <li class="active">
            
                <a href="/categories/inspect.html">I'm inspectin' I.T.</a>
            </li>

            <li class="page-scroll">
                <a href="https://fr.linkedin.com/in/julien-sobczak-56780a91">About Me</a>
            </li>
          </ul>
        </div>
      </div>
      <button id="zen-mode-in"><i class="fas fa-minus"></i></button>
      <button id="zen-mode-out"><i class="fas fa-plus"></i></button>
    </div>
  </nav>


  <header class="post-title post-inspect">
  <!-- see https://www.elastic.co/blog/elasticsearch-5-0-0-released -->
  <div class="container">

    <div class="icon-category">
    </div>

    <div class="metadata">
      <span class="date">March 03, 2015</span>

      
      <a href="/tags/web" class="label">
      Web
      </a>
      

      
      <span class="label">
        Javascript
      </span>
      

      <ul class="language">
        <li class="current-language"><a class="active" href="#">EN</a></li>
      </ul>

      <h2>Reveal.js Revealed</h2>
      

      <p class="author-name">
        
        <span>By </span>
        
        <a href="/#about-me">Julien Sobczak</a>
      </p>

     </div>
    </div>
  </div>
</header>

<section class="content">

  <div class="container">

    <article>

      <div class="content">
      <div class="admonitionblock caution license">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You are reading a translation of an <a href="https://julien-sobczak.github.io/blog-fr/inspect/2015/03/03/revealjs-revealed.html">old blog post</a> published on my previous blog in French.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph lead">
<p>No more boring slides with <a href="http://lab.hakim.se/reveal-js/#/">Reveal.js</a>. How does this library based on HTML5 and CSS3 technologies challenge the existence of PowerPoint? We will find out by rewriting from scratch a minimal version.</p>
</div>
<div class="admonitionblock caution license">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<a href="https://github.com/hakimel/reveal.js/">Reveal.js</a> is published under an <a href="https://github.com/hakimel/reveal.js/blob/master/LICENSE">OpenSource license</a>. The code presented in this article has been simplified for obvious reasons and must not be used outside this learning context. This article is based on the latest version at the moment of publication.
</td>
</tr>
</table>
</div>
<div class="sect1">
<h2 id="a_first_example">A First Example</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;html</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">utf-8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="tag">&lt;title&gt;</span>Implementing reveal.js from scratch<span class="tag">&lt;/title&gt;</span>

        <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css/reveal.css</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stylesheet</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">css/theme/black.css</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;/head&gt;</span>

    <span class="tag">&lt;body&gt;</span>

        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">reveal slide</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <span class="comment">&lt;!-- fade/slide/concave --&gt;</span>

            <span class="comment">&lt;!-- Any section element inside of this container is displayed as a slide --&gt;</span>
            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">slides</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                <span class="tag">&lt;section&gt;</span>
                    <span class="tag">&lt;h1&gt;</span>Reveal.js<span class="tag">&lt;/h1&gt;</span>
                    <span class="tag">&lt;h3&gt;</span>Implement the HTML Presentation Framework from Scratch<span class="tag">&lt;/h3&gt;</span>
                    <span class="tag">&lt;p&gt;</span>
                        <span class="tag">&lt;small&gt;</span>
                            Reveal.is was created by
                            <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://hakim.se</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hakim El Hattab<span class="tag">&lt;/a&gt;</span>
                        <span class="tag">&lt;/small&gt;</span>
                    <span class="tag">&lt;/p&gt;</span>
                    <span class="tag">&lt;p&gt;</span>
                        <span class="comment">&lt;!-- Exemple of internal link --&gt;</span>
                        We will support link between slides, <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#/2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>like this<span class="tag">&lt;/a&gt;</span>.
                    <span class="tag">&lt;/p&gt;</span>
                <span class="tag">&lt;/section&gt;</span>

                <span class="comment">&lt;!-- Example of nested vertical slides --&gt;</span>
                <span class="tag">&lt;section&gt;</span>
                    <span class="tag">&lt;section&gt;</span>
                        <span class="tag">&lt;h2&gt;</span>Vertical Slides are supported too !<span class="tag">&lt;/h2&gt;</span>
                        <span class="tag">&lt;p&gt;</span>You could use <span class="tag">&lt;em&gt;</span>arrows<span class="tag">&lt;/em&gt;</span> to navigate through all slides.<span class="tag">&lt;/p&gt;</span>
                    <span class="tag">&lt;/section&gt;</span>
                    <span class="tag">&lt;section&gt;</span>
                        <span class="tag">&lt;h2&gt;</span>You could adjust the window size<span class="tag">&lt;/h2&gt;</span>
                        <span class="tag">&lt;p&gt;</span>Slides are automatically resized.<span class="tag">&lt;/p&gt;</span>
                    <span class="tag">&lt;/section&gt;</span>
                <span class="tag">&lt;/section&gt;</span>

                <span class="tag">&lt;section&gt;</span>
                    <span class="tag">&lt;h2&gt;</span>Finished!<span class="tag">&lt;/h2&gt;</span>
                    <span class="tag">&lt;p&gt;</span>
                        <span class="tag">&lt;small&gt;</span>
                            <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.juliensobczak.com</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Read the post<span class="tag">&lt;/a&gt;</span>
                        <span class="tag">&lt;/small&gt;</span>
                    <span class="tag">&lt;/p&gt;</span>
                <span class="tag">&lt;/section&gt;</span>
            <span class="tag">&lt;/div&gt;</span>

        <span class="tag">&lt;/div&gt;</span>

        <span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/js/reveal.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>

        <span class="tag">&lt;script&gt;</span>
<span class="inline">
            Reveal.initialize();</span>

        <span class="tag">&lt;/script&gt;</span>

    <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the rendered result of our presentation:</p>
</div>
<iframe src="/posts_resources/2015-03-03-revealjs-revealed/example.html"
    style="width: 100%; min-height: 400px">
</iframe>
<div class="paragraph">
<p>Reveal.js is far more powerful than what this simple presentation suggests. The lists of <a href="https://github.com/hakimel/reveal.js">features supported by Reveal</a> is huge: a ton of animations, overview, fragments, mode speaker, PDF export, &#8230;&#8203; We are not going to implement all of these features but instead focus on the navigation between slides (horizontal et vertical), the links, the keyboard shortcuts, and also a few animations that make reveal.js so attractive.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="slide_by_slide">Slide by slide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The initialization of Reveal starts with the method <code>Reveal.initialize()</code>. Here is the skeleton of our implementation defined in a file <code>reveal.lite.js</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> Reveal;

(<span class="keyword">function</span>() {

    <span class="string"><span class="delimiter">'</span><span class="content">use strict</span><span class="delimiter">'</span></span>;

    <span class="keyword">var</span> SLIDES_SELECTOR = <span class="string"><span class="delimiter">'</span><span class="content">.slides section</span><span class="delimiter">'</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
        HORIZONTAL_SLIDES_SELECTOR = <span class="string"><span class="delimiter">'</span><span class="content">.slides&gt;section</span><span class="delimiter">'</span></span>,
        VERTICAL_SLIDES_SELECTOR = <span class="string"><span class="delimiter">'</span><span class="content">.slides&gt;section.present&gt;section</span><span class="delimiter">'</span></span>,

        <span class="comment">// The horizontal and vertical index of the currently active slide</span>
        indexh, <i class="conum" data-value="2"></i><b>(2)</b>
        indexv, <i class="conum" data-value="2"></i><b>(2)</b>

        <span class="comment">// Cached references to DOM elements</span>
        dom = {};

    <span class="keyword">function</span> <span class="function">initialize</span>() {

        <span class="comment">// Cache references to elements</span>
        dom.wrapper = document.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">.reveal</span><span class="delimiter">'</span></span> );
        dom.slides = document.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">.reveal .slides</span><span class="delimiter">'</span></span> );

        <span class="comment">// Go to first slide</span>
        slide(<span class="integer">0</span>, <span class="integer">0</span>); <i class="conum" data-value="3"></i><b>(3)</b>
    }


    <span class="comment">/**
     * Steps from the current point in the presentation to the
     * slide which matches the specified horizontal and vertical
     * indices.
     *
     * @param {int} h Horizontal index of the target slide
     * @param {int} v Vertical index of the target slide
     */</span>
    <span class="keyword">function</span> <span class="function">slide</span>( h, v ) {

    }


    Reveal = {
        <span class="key">initialize</span>: initialize
    };

})();</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We predefine main CSS selectors to retrieve all slides or just the horizontal and vertical ones. These constants will be reused several times during the next steps.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We define two variables <code>indexh</code> and <code>indexv</code> to represent our current position inside the presentation, like a slide number.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We end by requesting the display of the first slide (i.e., the first horizontal and vertical slide). For the moment, everything remains to be implemented in this method.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before going further, we need to define a basic CSS stylesheet; otherwise, the browser will display all slides at once.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="tag">html</span>, <span class="tag">body</span> {
  <span class="key">width</span>: <span class="float">100%</span>;
  <span class="key">height</span>: <span class="float">100%</span>;
  <span class="key">overflow</span>: <span class="value">hidden</span>; }

<span class="class">.reveal</span> {
  <span class="key">position</span>: <span class="value">relative</span>;
  <span class="key">width</span>: <span class="float">100%</span>;
  <span class="key">height</span>: <span class="float">100%</span>; }

<span class="class">.reveal</span> <span class="class">.slides</span> {
  <span class="key">position</span>: <span class="value">absolute</span>;
  <span class="key">top</span>: <span class="float">0</span>;
  <span class="key">right</span>: <span class="float">0</span>;
  <span class="key">bottom</span>: <span class="float">0</span>;
  <span class="key">left</span>: <span class="float">0</span>;
  <span class="key">text-align</span>: <span class="value">center</span>; }

<span class="class">.reveal</span> <span class="tag">section</span> {
  <span class="key">position</span>: <span class="value">absolute</span>;
  <span class="key">width</span>: <span class="float">100%</span>; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The page now looks like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts_resources/2015-03-03-revealjs-revealed/layout.png" alt="layout" width="90%">
</div>
</div>
<div class="paragraph">
<p>The parent tag with the CSS class <code>.reveal</code> (called <code>wrapper</code> in the code) is positioned to use all available space on the screen. This allows slides inside this wrapper to occupy the screen. Note that the relative position will be useful to position slides using absolute values when defining CSS animations.</p>
</div>
<div class="paragraph">
<p>All slides are thus superimposed on top of each other. The JavaScript code will use a few CSS classes (<code>past</code>, <code>present</code>, <code>future</code>) to change the slides on screen. For example, to display the current slide:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.reveal</span> <span class="tag">section</span><span class="class">.present</span> {
  <span class="key">opacity</span>: <span class="float">1</span>;
  <span class="key">z-index</span>: <span class="float">10</span> }

<span class="class">.reveal</span> <span class="tag">section</span><span class="class">.past</span>, <span class="class">.reveal</span> <span class="tag">section</span><span class="class">.future</span> {
  <span class="key">opacity</span>: <span class="float">0</span>; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The transition from one slide to a different one is done by the method <code>slide</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">function</span> <span class="function">slide</span>( h, v ) {

    <span class="comment">// Activate and transition to the new slide</span>
    indexh = updateSlides( HORIZONTAL_SLIDES_SELECTOR, h === <span class="predefined-constant">undefined</span> ? indexh : h );
    indexv = updateSlides( VERTICAL_SLIDES_SELECTOR, v === <span class="predefined-constant">undefined</span> ? indexv : v );

    layout();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The code operates two translations, on the horizontal and vertical axis. The core logic resides in the method <code>updateSlides</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/**
 * Updates one dimension of slides by showing the slide
 * with the specified index.
 *
 * @param {String} selector A CSS selector that will fetch
 * the group of slides we are working with
 * @param {Number} index The index of the slide that should be
 * shown
 *
 * @return {Number} The index of the slide that is now shown,
 * might differ from the passed in index if it was out of
 * bounds.
 */</span>
<span class="keyword">function</span> <span class="function">updateSlides</span>( selector, index ) {

    <span class="comment">// Select all slides and convert the NodeList result to</span>
    <span class="comment">// an array</span>
    <span class="keyword">var</span> slides = [].slice.call( dom.wrapper.querySelectorAll( selector ) ),
        slidesLength = slides.length;

    <span class="keyword">if</span>( slidesLength ) {

        <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; slidesLength; i++ ) {
            <span class="keyword">var</span> element = slides[i];

            element.classList.remove( <span class="string"><span class="delimiter">'</span><span class="content">past</span><span class="delimiter">'</span></span> );
            element.classList.remove( <span class="string"><span class="delimiter">'</span><span class="content">present</span><span class="delimiter">'</span></span> );
            element.classList.remove( <span class="string"><span class="delimiter">'</span><span class="content">future</span><span class="delimiter">'</span></span> );

            <span class="comment">// If this element contains vertical slides</span>
            <span class="keyword">if</span>( element.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">section</span><span class="delimiter">'</span></span> ) ) {
                element.classList.add( <span class="string"><span class="delimiter">'</span><span class="content">stack</span><span class="delimiter">'</span></span> );
            }

            <span class="keyword">if</span>( i &lt; index ) {
                <span class="comment">// Any element previous to index is given the 'past' class</span>
                element.classList.add( <span class="string"><span class="delimiter">'</span><span class="content">past</span><span class="delimiter">'</span></span> );
            }
            <span class="keyword">else</span> <span class="keyword">if</span>( i &gt; index ) {
                <span class="comment">// Any element subsequent to index is given the 'future' class</span>
                element.classList.add( <span class="string"><span class="delimiter">'</span><span class="content">future</span><span class="delimiter">'</span></span> );
            }
        }

        <span class="comment">// Mark the current slide as present</span>
        slides[index].classList.add( <span class="string"><span class="delimiter">'</span><span class="content">present</span><span class="delimiter">'</span></span> );
    }
    <span class="keyword">else</span> {
        <span class="comment">// Since there are no slides we can't be anywhere beyond the</span>
        <span class="comment">// zeroth index</span>
        index = <span class="integer">0</span>;
    }

    <span class="keyword">return</span> index;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the first method with a lot of implementation details. The code logic is relatively simple. The first parameter is a CSS selector. In practice, this parameter is mainly used to indicate if we are sliding horizontally or vertically. The second parameter is the index on the chosen axis. The code traverses each slide on this axis to configure the right CSS classes. Note the presence of a class <code>stack</code> assigned on slides of type parent (i.e., the slides having vertical slides inside).</p>
</div>
<div class="paragraph">
<p>The value returned by this method <code>updateSlides</code> is the new index used to adjust the previous variables <code>indexh</code> and <code>indexv</code> in the method <code>slide</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Zoom on <code>element.classList</code></div>
<div class="paragraph">
<p>Supported by modern browsers, <a href="https://developer.mozilla.org/fr/docs/Web/API/Element/classList">the property <code>classList</code></a> defined in the <a href="https://developer.mozilla.org/fr/docs/Web/API/Element">â€™object <code>Element</code></a> offers the same convenience as the jQuery API. We no longer need to parse the <a href="https://developer.mozilla.org/fr/docs/Web/API/Element/className">attribute <code>className</code></a> to add or remove CSS classes, as the interface <a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList"><code>DOMTokenList</code></a> defines methods like <code>add</code>, <code>remove</code>, <code>toggle</code>, &#8230;&#8203;</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="automatic_resizing">Automatic Resizing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have probably noticed on the Reveal.js demo, the size of the presentation (i.e., the slides) automatically adjusts when you resize your browser window. With our current implementation, the slides occupy the full screen, but their content does not scale in consequence:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts_resources/2015-03-03-revealjs-revealed/slides-no-layout.png" alt="slides no layout">
</div>
</div>
<div class="paragraph">
<p>How can the content of the slides be adapted to the screen size? How to reduce/enlarge the font size, images, and videos shown? The solution is elegant, using CSS animations like the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale%28%29">function <code>scale()</code></a>. The calculations are grouped inside the method <code>layout</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/**
 * Applies JavaScript-controlled layout rules to the presentation.
 */</span>
<span class="keyword">function</span> <span class="function">layout</span>() {

    <span class="keyword">var</span> size = {
        <span class="key">slideWidth</span>: <span class="integer">960</span>,
        <span class="key">slideHeight</span>: <span class="integer">700</span>,
        <span class="key">presentationWidth</span>: dom.wrapper.offsetWidth,
        <span class="key">presentationHeight</span>: dom.wrapper.offsetHeight
    };

    <span class="keyword">var</span> slidePadding = <span class="integer">20</span>;

    dom.slides.style.width = size.slideWidth + <span class="string"><span class="delimiter">'</span><span class="content">px</span><span class="delimiter">'</span></span>;
    dom.slides.style.height = size.slideHeight + <span class="string"><span class="delimiter">'</span><span class="content">px</span><span class="delimiter">'</span></span>;

    <span class="comment">// Determine scale of content to fit within available space</span>
    <span class="keyword">var</span> scale = Math.min(
      size.presentationWidth / size.slideWidth,
      size.presentationHeight / size.slideHeight );

    dom.slides.style.left = <span class="string"><span class="delimiter">'</span><span class="content">50%</span><span class="delimiter">'</span></span>; <i class="conum" data-value="1"></i><b>(1)</b>
    dom.slides.style.top = <span class="string"><span class="delimiter">'</span><span class="content">50%</span><span class="delimiter">'</span></span>;
    dom.slides.style.bottom = <span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span>;
    dom.slides.style.right = <span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span>;
    dom.slides.style.transform = <span class="string"><span class="delimiter">'</span><span class="content">translate(-50%, -50%) scale(</span><span class="delimiter">'</span></span> + scale + <span class="string"><span class="delimiter">'</span><span class="content">)</span><span class="delimiter">'</span></span>;

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We compare the default size for a slide (960x700) with the effective screen size. We obtain the ratio to apply to scale the slide to match the full screen.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s modify the method <code>slide</code> to use this new method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
<strong class="highlighted">7</strong>
8
</pre></td>
  <td class="code"><pre><span class="keyword">function</span> <span class="function">slide</span>( h, v ) {

    <span class="comment">// Activate and transition to the new slide</span>
    indexh = updateSlides( HORIZONTAL_SLIDES_SELECTOR, h === <span class="predefined-constant">undefined</span> ? indexh : h );
    indexv = updateSlides( VERTICAL_SLIDES_SELECTOR, v === <span class="predefined-constant">undefined</span> ? indexv : v );

    layout();
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result is immediately more satisfactory. The slides resize to match the window size, except if you are trying to resize the browser window. This is easy to fix by reusing the method <code>layout</code> and listening for this event:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
<strong class="highlighted">8</strong>
9
10
11
12
13
14
15
16
</pre></td>
  <td class="code"><pre><span class="keyword">function</span> <span class="function">initialize</span>() {

    <span class="comment">// Cache references to elements</span>
    dom.wrapper = document.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">.reveal</span><span class="delimiter">'</span></span> );
    dom.slides = document.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">.reveal .slides</span><span class="delimiter">'</span></span> );

    <span class="comment">// Subscribe to events</span>
    window.addEventListener( <span class="string"><span class="delimiter">'</span><span class="content">resize</span><span class="delimiter">'</span></span>, onWindowResize, <span class="predefined-constant">false</span> );

    <span class="comment">// Read the initial hash</span>
    slide(<span class="integer">0</span>, <span class="integer">0</span>);
}

<span class="keyword">function</span> <span class="function">onWindowResize</span>( event ) {
    layout();
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/posts_resources/2015-03-03-revealjs-revealed/slides-with-layout.png" alt="slides with layout">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="keyboard_navigation">Keyboard Navigation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For now, only the first slide is displayed. Using the directional keys, we will allow the user to change the current slide. We start by listening for events of type <code>keydown</code>. We also take the opportunity to refactor the method <code>initialize</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
<strong class="highlighted">34</strong>
35
36
</pre></td>
  <td class="code"><pre><span class="comment">/**
 * Starts up the presentation.
 */</span>
<span class="keyword">function</span> <span class="function">initialize</span>() {

    <span class="comment">// Make sure we've got all the DOM elements we need</span>
    setupDOM();

    <span class="comment">// Subscribe to input</span>
    addEventListeners();

    <span class="comment">// Go directly to the first slide</span>
    slide(<span class="integer">0</span>, <span class="integer">0</span>);
}

<span class="comment">/**
 * Finds and stores references to DOM elements which are
 * required by the presentation.
 */</span>
<span class="keyword">function</span> <span class="function">setupDOM</span>() {

    <span class="comment">// Cache references to elements</span>
    dom.wrapper = document.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">.reveal</span><span class="delimiter">'</span></span> );
    dom.slides = document.querySelector( <span class="string"><span class="delimiter">'</span><span class="content">.reveal .slides</span><span class="delimiter">'</span></span> );

}

<span class="comment">/**
 * Binds all event listeners.
 */</span>
<span class="keyword">function</span> <span class="function">addEventListeners</span>() {

    window.addEventListener( <span class="string"><span class="delimiter">'</span><span class="content">resize</span><span class="delimiter">'</span></span>, onWindowResize, <span class="predefined-constant">false</span> );
    document.addEventListener( <span class="string"><span class="delimiter">'</span><span class="content">keydown</span><span class="delimiter">'</span></span>, onDocumentKeyDown, <span class="predefined-constant">false</span> );

}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>The handler uses standard codes to determine the direction to follow in the presentation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/**
 * Handler for the document level 'keydown' event.
 */</span>
<span class="keyword">function</span> <span class="function">onDocumentKeyDown</span>( event ) {

    <span class="keyword">switch</span>( event.keyCode ) {
        <span class="comment">// left</span>
        <span class="keyword">case</span> <span class="integer">37</span>: navigateLeft(); <span class="keyword">break</span>;
        <span class="comment">// right</span>
        <span class="keyword">case</span> <span class="integer">39</span>: navigateRight(); <span class="keyword">break</span>;
        <span class="comment">// up</span>
        <span class="keyword">case</span> <span class="integer">38</span>: navigateUp(); <span class="keyword">break</span>;
        <span class="comment">// down</span>
        <span class="keyword">case</span> <span class="integer">40</span>: navigateDown(); <span class="keyword">break</span>;
    }

}

<span class="keyword">function</span> <span class="function">navigateLeft</span>()  { slide( indexh - <span class="integer">1</span> );         } <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">function</span> <span class="function">navigateRight</span>() { slide( indexh + <span class="integer">1</span> );         } <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">function</span> <span class="function">navigateUp</span>()    { slide( indexh, indexv - <span class="integer">1</span> ); } <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">function</span> <span class="function">navigateDown</span>()  { slide( indexh, indexv + <span class="integer">1</span> ); } <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We use the two variables <code>indexh</code> and <code>indexv</code> to determine our current position, before calling the method <code>slide</code> to move in the right direction.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The navigation is now operational but the code does not block the user from moving beyond the last slide. Using CSS selectors, we will determine the maximum number of slides and compare with our current position to determine if the move is possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
<strong class="highlighted">24</strong>
25
26
27
28
29
30
31
<strong class="highlighted">32</strong>
33
34
35
36
37
38
39
<strong class="highlighted">40</strong>
41
42
43
44
45
46
47
<strong class="highlighted">48</strong>
49
50
51
52
</pre></td>
  <td class="code"><pre><span class="comment">/**
 * Determine what available routes there are for navigation.
 *
 * @return {Object} containing four booleans: left/right/up/down
 */</span>
<span class="keyword">function</span> <span class="function">availableRoutes</span>() {

    <span class="keyword">var</span> horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),
        verticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );

    <span class="keyword">var</span> routes = {
        <span class="key">left</span>: indexh &gt; <span class="integer">0</span>,
        <span class="key">right</span>: indexh &lt; horizontalSlides.length - <span class="integer">1</span>,
        <span class="key">up</span>: indexv &gt; <span class="integer">0</span>,
        <span class="key">down</span>: indexv &lt; verticalSlides.length - <span class="integer">1</span>
    };

    <span class="keyword">return</span> routes;

}

<span class="keyword">function</span> <span class="function">navigateLeft</span>() {

    <span class="keyword">if</span>( availableRoutes().left ) {
        slide( indexh - <span class="integer">1</span> );
    }

}

<span class="keyword">function</span> <span class="function">navigateRight</span>() {

    <span class="keyword">if</span>( availableRoutes().right ) {
        slide( indexh + <span class="integer">1</span> );
    }

}

<span class="keyword">function</span> <span class="function">navigateUp</span>() {

    <span class="keyword">if</span>( availableRoutes().up ) {
        slide( indexh, indexv - <span class="integer">1</span> );
    }

}

<span class="keyword">function</span> <span class="function">navigateDown</span>() {

    <span class="keyword">if</span>( availableRoutes().down ) {
        slide( indexh, indexv + <span class="integer">1</span> );
    }

}</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="animations">Animations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reveal.js would not be the same without animations. Under the hood, those animations use CSS animations. Using the already defined CSS classes, only a few lines of CSS is necessary to animate the slides.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start with the most simple effect: <code>fade</code>.</p>
</div>
<div class="sect2">
<h3 id="the_fade_effect">The fade effect</h3>
<div class="paragraph">
<p>(<a href="http://lab.hakim.se/reveal-js/?transition=slide#/transitions">Demo</a>)</p>
</div>
<div class="paragraph">
<p>As a reminder, here are the CSS declarations that will be enriched:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.reveal</span> <span class="tag">section</span><span class="class">.present</span> {
  <span class="key">opacity</span>: <span class="float">1</span>; }

<span class="class">.reveal</span> <span class="tag">section</span><span class="class">.past</span>, <span class="class">.reveal</span> <span class="tag">section</span><span class="class">.future</span> {
  <span class="key">opacity</span>: <span class="float">0</span>; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>fade</code> effect consists in defining a transition for the property <code>opacity</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.reveal</span><span class="class">.fade</span> <span class="tag">section</span> {
  <span class="key">transition</span>: <span class="value">opacity</span> <span class="float">0.5s</span>; }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Every time the user changes the current slide, the previous one disappears in half a second while the new slide appears simultaneously. Easy? Let&#8217;s try to implement the <code>slide</code> effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="the_slide_effect">The slide effect</h3>
<div class="paragraph">
<p>(<a href="http://lab.hakim.se/reveal-js/?transition=slide#/transitions">Demo</a>)</p>
</div>
<div class="paragraph">
<p>When using this effect, the previous slide disappears on the left while the next one appears on the right of the screen. For vertical slides, the principle is the same, except we are using the vertical axis.</p>
</div>
<div class="paragraph">
<p>Here are the CSS declarations to support this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.reveal</span><span class="class">.slide</span> <span class="tag">section</span> {
  <span class="key">transition</span>: <span class="value">all</span> <span class="float">800</span><span class="value">ms</span> <span class="value">ease-in-out</span>; } <i class="conum" data-value="1"></i><b>(1)</b>

<span class="class">.reveal</span><span class="class">.slide</span> <span class="class">.slides</span> &gt; <span class="tag">section</span><span class="class">.past</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span>(<span class="float">-150%</span>, <span class="float">0</span>); } <i class="conum" data-value="2"></i><b>(2)</b>

<span class="class">.reveal</span><span class="class">.slide</span> <span class="class">.slides</span> &gt; <span class="tag">section</span><span class="class">.future</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span>(<span class="float">150%</span>, <span class="float">0</span>); } <i class="conum" data-value="2"></i><b>(2)</b>

<span class="class">.reveal</span><span class="class">.slide</span> <span class="class">.slides</span> &gt; <span class="tag">section</span> &gt; <span class="tag">section</span><span class="class">.past</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span>(<span class="float">0</span>, <span class="float">-150%</span>); } <i class="conum" data-value="2"></i><b>(2)</b>

<span class="class">.reveal</span> <span class="class">.slides</span> &gt; <span class="tag">section</span> &gt; <span class="tag">section</span><span class="class">.future</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span>(<span class="float">0</span>, <span class="float">150%</span>); } <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We configure the animation to start slowly.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We rely on the function <a href="https://developer.mozilla.org/fr/docs/Web/CSS/transform#translate"><code>translate</code></a>. Using a large percent, we are sure the slide will completely exit the screen.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An immersion in 3D to finish? Let&#8217;s finish with the <code>concave</code> effect.</p>
</div>
</div>
<div class="sect2">
<h3 id="the_concave_effect">The concave effect</h3>
<div class="paragraph">
<p>(<a href="http://lab.hakim.se/reveal-js/?transition=slide#/transitions">Demo</a>)</p>
</div>
<div class="paragraph">
<p>This effect is the 3D equivalent of the previous <code>slide</code>.</p>
</div>
<div class="paragraph">
<p>The CSS declarations is slightly more advanced but only a few lines are required to support this effect:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="css"><span class="class">.reveal</span> <span class="class">.slides</span> {
  <span class="comment">/* ... */</span>
  <span class="key">text-align</span>: <span class="value">center</span>;
  <span class="key">perspective</span>: <span class="float">600px</span>;
  <span class="key">perspective-origin</span>: <span class="float">50%</span> <span class="float">40%</span>; }

<span class="class">.reveal</span><span class="class">.concave</span> <span class="tag">section</span> {
  <span class="key">transform-style</span>: <span class="value">preserve-3d</span>;
  <span class="key">transition</span>: <span class="value">all</span> <span class="float">800</span><span class="value">ms</span> <span class="error">c</span><span class="error">u</span><span class="error">b</span><span class="error">i</span><span class="error">c</span><span class="error">-</span><span class="error">b</span><span class="error">e</span><span class="error">z</span><span class="error">i</span><span class="error">e</span><span class="error">r</span>(<span class="float">0.26</span>, <span class="float">0.86</span>, <span class="float">0.44</span>, <span class="float">0.985</span>); }

<span class="class">.reveal</span><span class="class">.concave</span> <span class="class">.slides</span> &gt; <span class="tag">section</span><span class="class">.past</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">-100%</span>, <span class="float">0</span>, <span class="float">0</span>) <span class="error">r</span><span class="error">o</span><span class="error">t</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="error">Y</span>(<span class="float">90deg</span>) }

<span class="class">.reveal</span><span class="class">.concave</span> <span class="class">.slides</span> &gt; <span class="tag">section</span><span class="class">.future</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">100%</span>, <span class="float">0</span>, <span class="float">0</span>) <span class="error">r</span><span class="error">o</span><span class="error">t</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="error">Y</span>(<span class="float">-90deg</span>) }

<span class="class">.reveal</span><span class="class">.concave</span> <span class="class">.slides</span> &gt; <span class="tag">section</span> &gt; <span class="tag">section</span><span class="class">.past</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">0</span>, <span class="float">-80%</span>, <span class="float">0</span>) <span class="error">r</span><span class="error">o</span><span class="error">t</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="error">X</span>(<span class="float">-70deg</span>) }

<span class="class">.reveal</span><span class="class">.concave</span> <span class="class">.slides</span> &gt; <span class="tag">section</span> &gt; <span class="tag">section</span><span class="class">.future</span> {
  <span class="key">transform</span>: <span class="error">t</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">s</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="float">3</span><span class="error">d</span>(<span class="float">0</span>, <span class="float">80%</span>, <span class="float">0</span>) <span class="error">r</span><span class="error">o</span><span class="error">t</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="error">X</span>(<span class="float">70deg</span>) }</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Zoom on function <code>cubier-bezier</code></div>
<div class="paragraph">
<p>The CSS property <code>transition</code> supports what is called a <a href="https://developer.mozilla.org/fr/docs/Web/CSS/timing-function">timing function</a> (or easing function). Several functions are predefined (<code>linear</code>, <code>ease-in</code>, â€¦). Using the function <code>cubic-bezier</code>, we can define new custom functions using, as its name suggests, a <a href="http://fr.wikipedia.org/wiki/Courbe_de_B%C3%A9zier">Bezier curve</a>, well-known to users of Adobe Illustrator. Bezier curves are not adapted in every context but they are very flexible and easy to use.</p>
</div>
<div class="paragraph">
<p>The website <a href="http://lea.verou.me/2011/09/a-better-tool-for-cubic-bezier-easing/">cubic-bezier.com</a> allows you to <a href="http://cubic-bezier.com/#.26,.86,.44,.98">create visually your curve</a> and generates the corresponding CSS code. This site is the work of Lea Verou, to whom we also owe the projects <a href="/inspect/2014/11/06/prefix-free-from-scratch.html">-prefix-free</a> and <a href="/inspect/2014/11/25/prism-from-scratch.html">prism</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="links">Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before closing this article, let&#8217;s look at the links between slides.</p>
</div>
<div class="paragraph">
<p>The solution relies on the URL fragment (the optional hash value following the character <code><mark></code> in an URL) to identify the slide to display. For example <code></mark>/1/2</code> represents the second vertical slide below the first horizontal slide. When clicking on a link, the code modifies the hash like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;p&gt;</span>
  <span class="comment">&lt;!-- Example of internal link --&gt;</span>
  We will support link between slides, <span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#/2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>like this<span class="tag">&lt;/a&gt;</span>.
<span class="tag">&lt;/p&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In JavaScript, we need to listen for changes using the event <code>hashchange</code>, and extract the value to delegates to the method <code>slide</code> to move to the destination:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
<strong class="highlighted">6</strong>
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
<strong class="highlighted">28</strong>
29
30
31
</pre></td>
  <td class="code"><pre><span class="comment">/**
 * Binds all event listeners.
 */</span>
<span class="keyword">function</span> <span class="function">addEventListeners</span>() {

    window.addEventListener( <span class="string"><span class="delimiter">'</span><span class="content">hashchange</span><span class="delimiter">'</span></span>, onWindowHashChange, <span class="predefined-constant">false</span> );
    window.addEventListener( <span class="string"><span class="delimiter">'</span><span class="content">resize</span><span class="delimiter">'</span></span>, onWindowResize, <span class="predefined-constant">false</span> );
    document.addEventListener( <span class="string"><span class="delimiter">'</span><span class="content">keydown</span><span class="delimiter">'</span></span>, onDocumentKeyDown, <span class="predefined-constant">false</span> );

}

<span class="keyword">function</span> <span class="function">onWindowHashChange</span>( event ) { readURL(); }

<span class="comment">/**
 * Reads the current URL (hash) and navigates accordingly.
 */</span>
<span class="keyword">function</span> <span class="function">readURL</span>() {

    <span class="keyword">var</span> hash = window.location.hash;

    <span class="keyword">var</span> bits = hash.slice( <span class="integer">2</span> ).split( <span class="string"><span class="delimiter">'</span><span class="content">/</span><span class="delimiter">'</span></span> );

    <span class="comment">// Read the index components of the hash</span>
    <span class="keyword">var</span> h = parseInt( bits[<span class="integer">0</span>], <span class="integer">10</span> ) || <span class="integer">0</span>,
        v = parseInt( bits[<span class="integer">1</span>], <span class="integer">10</span> ) || <span class="integer">0</span>;

    <span class="keyword">if</span>( h !== indexh || v !== indexv ) {
        slide( h, v );
    }

}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the hash has many advantages. It also allows the user to bookmark a given slide. This requires a slight modification to read the hash during initialization:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/**
 * Starts up the presentation.
 */</span>
<span class="keyword">function</span> <span class="function">initialize</span>() {

    <span class="comment">// Make sure we've got all the DOM elements we need</span>
    setupDOM();

    <span class="comment">// Subscribe to input</span>
    addEventListeners();

    <span class="comment">// Read the initial hash</span>
    readURL(); <i class="conum" data-value="1"></i><b>(1)</b>

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The method <code>slide</code> is wrapped inside a new method <code>readURL</code>. If no hash is present, we simply display the first slide as before.</td>
</tr>
</table>
</div>
<div class="admonitionblock note congratulations">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Congratulations!</div>
<div class="paragraph">
<p><strong>Congratulations, you have written a minimal and operational version of Reveal.js in less than 200 lines of JavaScript code, with just 100 lines of CSS code</strong>. The example presentation is available <a href="/posts_resources/2015-03-03-revealjs-revealed/example.html">here</a>, just like the <a href="https://github.com/julien-sobczak/reveal-from-scratch">complete source code</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="to_go_further">To Go Further</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="amd_support_node">AMD Support &amp; Node</h3>
<div class="paragraph">
<p>Reveal.js, like many existing libraries, started by exposing a single global variable (<code>Reveal</code>). With the introduction of AMD modules and following the success of Node.js, Reveal needs to support these new use cases. The solution is not new and has been well documented through the <a href="https://github.com/umdjs/umd">UMD Pattern (Universal Module Definition)</a>.</p>
</div>
<div class="paragraph">
<p>The UMD pattern makes possible to interoperate with existing loaders. As often in JavaScript, we inspect the objects present in the global namespace to detect the environment. Here is a preview of the code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">(<span class="keyword">function</span>( root, factory ) { <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">if</span>( <span class="keyword">typeof</span> define === <span class="string"><span class="delimiter">'</span><span class="content">function</span><span class="delimiter">'</span></span> &amp;&amp; define.amd ) {
        <span class="comment">// AMD. Register as an anonymous module.</span>
        define( <span class="keyword">function</span>() { <i class="conum" data-value="2"></i><b>(2)</b>
            root.Reveal = factory();
            <span class="keyword">return</span> root.Reveal;
        } );
    } <span class="keyword">else</span> <span class="keyword">if</span>( <span class="keyword">typeof</span> exports === <span class="string"><span class="delimiter">'</span><span class="content">object</span><span class="delimiter">'</span></span> ) {
        <span class="comment">// Node.</span>
        module.exports = factory(); <i class="conum" data-value="3"></i><b>(3)</b>
    } <span class="keyword">else</span> {
        <span class="comment">// Browser globals.</span>
        root.Reveal = factory(); <i class="conum" data-value="4"></i><b>(4)</b>
    }
}( <span class="local-variable">this</span>, <span class="keyword">function</span>() {

    <span class="keyword">var</span> Reveal;
    <span class="comment">// ... (All code presented in this post)</span>

    <span class="keyword">return</span> Reveal;

}));</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Functions are the only possible scope in JavaScript. This is why we use an immediate function to not pollute the global namespace uselessly.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We test for a method <code>define</code> having a property <code>amd</code> to determine if RequireJS is available. Reveal.js declares itself as an anonymous module without any dependency.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Like for AMD, we test for an object <code>exports</code>. Reveals declares itself like any other Node module.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>As before, our module is defined as a global variable, or more precisely a property of the object <code>window</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note remember">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">To Remember</div>
<div class="ulist">
<ul>
<li>
<p><strong>Only a few hundred of lines of code are enough to make PowerPoint a remembering of the past</strong>. (PowerPoint totals <a href="http://blogs.msdn.com/b/macmojo/archive/2006/11/03/it-s-all-in-the-numbers.aspx">millions of lines de code</a>.)</p>
</li>
<li>
<p><strong>CSS animations make accessible 3D effects</strong>.</p>
</li>
<li>
<p>The URL hash is the favorite solution to preserve the navigation in a Single-Page Application (SPA).</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note experiment">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Try for yourself!</div>
<div class="paragraph">
<p>Reveal.js is a complete solution. Just look at the speaker mode to convince you. We have omit a lot of features in this article. Why not adventure in the original source code to discover how these advanced features are implemented. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reveal.js supports the navigation between slides using also <strong>buttons</strong> and <strong>gesture movements</strong>. As the code is modular, adding these controls is very easy. Note: The <a href="https://github.com/julien-sobczak/reveal-from-scratch">complete code source of this article</a> supports the mouse.</p>
</li>
<li>
<p>The integrality of every slide content is displayed immediately with our implementation. Using <strong>fragments</strong>, Reveal.js supports the display of a slide content step by step. How does it work?</p>
</li>
<li>
<p>Presentations created with Reveal.js can be exported in <strong>PDF</strong>. This requires a few calculations in JavaScript and a few CSS declarations. Check the method <code>setupPDF</code>.</p>
</li>
<li>
<p>The <strong>overview mode</strong> displays a global picture of all your slides. This feature is implemented by the method <code>activateOverview</code>. Hint: The implementation also relies on CSS animations to create 3D effects.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
      </div>

      <div class="author-bio">
  <img src="/img/me.jpg" />
  <p><strong>About the author</strong></p>
  <p>Julien Sobczak works as a software developer for Scaleway, a French cloud provider. He is a passionate reader who likes to see the world differently to measure the extent of his ignorance. His main areas of interest are productivity (doing less and better), human potential, and everything that contributes in being a better person (including a better dad and a better developer).</p>
  <a href="https://fr.linkedin.com/in/julien-sobczak-56780a91">Read Full Profile</a>
</div>

    </article>

  </div>
</section>





  
<section id="labels" class="labels">
  <div class="container">

  <div>
    <h2>Tags</h2>
    <hr class="star-light">
  </div>


  <ul class="labels">
    <!-- TODO refactor remove useless tags and rename them. Ex: agile => people -->
    <!-- <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/agile.html"><span class="label-icon label-team-icon label-white-icon"></span><span class="label-text">People<span class="label-count">0</span></span></a>
      </div>
    </li> -->
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/architecture.html"><span class="label-icon label-architecture-icon label-white-icon"></span><span class="label-text">Architecture<span class="label-count">13</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/classics.html"><span class="label-icon label-classics-icon label-white-icon"></span><span class="label-text">Classics<span class="label-count">3</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/craftsmanship.html"><span class="label-icon label-craftsmanship-icon label-white-icon"></span><span class="label-text">Craftsmanship<span class="label-count">11</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/computer-science.html"><span class="label-icon label-computer-science-icon label-white-icon"></span><span class="label-text">Computer Science<span class="label-count">9</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/data.html"><span class="label-icon label-data-icon label-white-icon"></span><span class="label-text">Data<span class="label-count">6</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/devops.html"><span class="label-icon label-devops-icon label-white-icon"></span><span class="label-text">Devops<span class="label-count">11</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/frameworks.html"><span class="label-icon label-frameworks-icon label-white-icon"></span><span class="label-text">Frameworks<span class="label-count">10</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/human.html"><span class="label-icon label-human-icon label-white-icon"></span><span class="label-text">Human<span class="label-count">11</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/languages.html"><span class="label-icon label-languages-icon label-white-icon"></span><span class="label-text">Languages<span class="label-count">6</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/learning.html"><span class="label-icon label-reversing-icon label-white-icon"></span><span class="label-text">Learning<span class="label-count">31</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/management.html"><span class="label-icon label-management-icon label-white-icon"></span><span class="label-text">Management<span class="label-count">28</span></span></a>
      </div>
    </li>
    <!-- Not pertinent
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/popular.html"><span class="label-icon label-popular-icon label-white-icon"></span><span class="label-text">Popular<span class="label-count">0</span></span></a>
      </div>
    </li>
    -->
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/productivity.html"><span class="label-icon label-productivity-icon label-white-icon"></span><span class="label-text">Productivity<span class="label-count">16</span></span></a>
      </div>
    </li>
    <li>
      <div class="label">
        <span class="sunshine"></span><a href="/tags/tools.html"><span class="label-icon label-tools-icon label-white-icon"></span><span class="label-text">Tools<span class="label-count">9</span></span></a>
      </div>
    </li>
  </ul>

  </div>
</section>

  <footer id="footer">
    <img src="/img/me-torso-scaleway.png" class="footer-me" />
    <div class="footer-above">
        <div class="footer-col">
            <h3>Location</h3>
            <p>Lille<br>France</p>
        </div>
        <div class="footer-col">
            <h3>Around the Web</h3>
            <ul class="list-inline">
                <!-- <li>
                    <a href="https://www.goodreads.com/user/show/104485538-sobczak-julien" alt="Goodreads" title="Goodreads" class="btn-social btn-outline"><i class="fab fa-goodreads-g"></i></a>
                </li> -->
                <li>
                    <a href="https://literal.club/julien-sobczak" alt="Goodreads" title="Library.club" class="btn-social btn-outline"><i class="fa fa-book"></i></a>
                </li>
                <li>
                    <a href="https://github.com/julien-sobczak" alt="GitHub" title="GitHub" class="btn-social btn-outline"><i class="fab fa-github"></i></a>
                </li>
                <li>
                    <a href="https://fr.linkedin.com/in/julien-sobczak-56780a91" alt="LinkedIn" title="LinkedIn" class="btn-social btn-outline"><i class="fab fa-linkedin"></i></a>
                </li>
            </ul>
        </div>
    </div>
    <div class="footer-below">
        <span>Opinions are my own and don't reflect the views of my employer.</span><br/>
        <span class="manuscript">In addition, as anybody with an open mind, my opinions are likely to change from time to time...</span><br/><br/>
        <small class="copyright">Copyright &copy; 2024 Julien Sobczak</small><br/>
    </div>
</footer>

  <div id="easter-egg">
  <div id="water"></div>
  <div id="bikini-bottom">
    <img id="spongebob" src="/img/easter-egg/spongebob.png" width="20%">
  </div>
</div>
  <!-- Font Awesome CDN -->
<!-- <script src="https://kit.fontawesome.com/d54861fcaa.js" crossorigin="anonymous"></script> -->
<script src="/js/index.js"></script>

<!-- Masonry effect -->
<!-- <script src="https://unpkg.com/colcade@0/colcade.js"></script> -->
<script src="/vendor/fontawesome.js"></script>

<!-- Custom logic -->
<script src="/vendor/colcade.js"></script>


</body>
</html>
